apiVersion: v1
kind: Pod
metadata:
  name: mlperf-gpu-onnx-ssd-mobilenet
spec:
  volumes:
    - name: task-pv-storage
      hostPath:
        path: "/mnt/mlperf"
  restartPolicy: Never
  containers:
    - name: mlperf-infer-imgclassify-gpu
      image: tzourhs/mlperf-infer-imgclassify-gpu:1.4
      env:
      - name: DATA_DIR
        value: "/tmp/mlperf/data/coco-300"
      - name: MODEL_DIR
        value: "/tmp/mlperf/models/onnx_ssd_mobilenet"
      volumeMounts:
        - mountPath: "/tmp/mlperf"
          name: task-pv-storage
      workingDir: "/tmp/inference/vision/classification_and_detection/"
      command: ["/bin/bash", "-c", "./run_local.sh onnxruntime ssd-mobilenet gpu --accuracy"]
      resources:
        limits:
          nvidia.com/gpu: 1
